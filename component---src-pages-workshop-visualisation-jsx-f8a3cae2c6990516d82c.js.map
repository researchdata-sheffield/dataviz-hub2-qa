{"version":3,"sources":["webpack://datavizhub-tuos/./src/pages/workshop/visualisation.jsx"],"names":["sourceInfo","position","bottom","margin","fontSize","color","lineHeight","whiteSpace","plotTitle","fontWeight","textAlign","OptionBtn","styled","props","value","type","transformValue","data","Math","log10","abs","forEach","child","useState","valueOption","setValueOption","tooltipStyle","padding","borderLeft","chartConfig","JSONdata","innerRadius","hierarchyConfig","field","ignoreParentValue","meta","interactions","drilldown","enabled","breadCrumb","rootText","textStyle","fill","pattern","state","active","style","stroke","lineWidth","tooltip","customContent","title","console","log","name","includes","id","backgroundColor","backgroundImage","minHeight","height","maxWidth","borderRadius","backgroundSize","marginBottom","right","marginRight","display","flexDirection","onClick","left"],"mappings":"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","file":"component---src-pages-workshop-visualisation-jsx-f8a3cae2c6990516d82c.js","sourcesContent":["import React, { useState } from \"react\";\r\nimport { Sunburst } from \"@ant-design/charts\";\r\nimport JSONdata from \"./data.json\";\r\nimport styled from \"styled-components\";\r\n\r\nconst sourceInfo = {\r\n  position: \"absolute\",\r\n  bottom: 0,\r\n  margin: \"1rem\",\r\n  fontSize: \"0.72rem\",\r\n  color: \"#BDBDBD\",\r\n  lineHeight: 1,\r\n  whiteSpace: \"nowrap\"\r\n};\r\n\r\nconst plotTitle = {\r\n  color: \"white\",\r\n  lineHeight: 1.1,\r\n  fontSize: \"1.6rem\",\r\n  fontWeight: 700,\r\n  textAlign: \"center\"\r\n};\r\n\r\nconst OptionBtn = styled.button`\r\n  color: #292929;\r\n  font-size: 0.77rem;\r\n  background: ${(props) => (props.value == props.type ? \"#fb989F\" : \"white\")};\r\n  padding: 0.3rem;\r\n  margin-top: 5px;\r\n  border-radius: 2px;\r\n  border: 1px solid\r\n    ${(props) => (props.value == props.type ? \"#fb989F\" : \"white\")};\r\n`;\r\n\r\nconst transformValue = (data) => {\r\n  if (data[\"absoluteChange\"]) {\r\n    data[\"absoluteChangeLog\"] =\r\n      Math.log10(Math.abs(data[\"absoluteChange\"])) || 0.1;\r\n  }\r\n\r\n  if (data[\"children\"]) {\r\n    data[\"children\"].forEach((child) => {\r\n      return transformValue(child);\r\n    });\r\n  }\r\n\r\n  return data;\r\n};\r\n\r\n/**\r\n * Visualisation component\r\n * @returns\r\n */\r\nconst Visualisation = () => {\r\n  const [valueOption, setValueOption] = useState(\"percentageChange\");\r\n\r\n  const tooltipStyle = (data) => {\r\n    return {\r\n      margin: \".5rem .2rem\",\r\n      padding: \".2rem .5rem\",\r\n      fontSize: \".88rem\",\r\n      lineHeight: \"1.2\",\r\n      borderLeft: `8px solid ${data[0]?.color}`\r\n    };\r\n  };\r\n\r\n  const chartConfig = {\r\n    data: transformValue(JSONdata),\r\n    innerRadius: 0.3,\r\n    hierarchyConfig: {\r\n      field: \"absoluteChangeLog\",\r\n      ignoreParentValue: true\r\n    },\r\n    meta: {\r\n      type: \"linear\"\r\n    },\r\n    interactions: [{ type: \"element-active\" }],\r\n    drilldown: {\r\n      enabled: true,\r\n      breadCrumb: {\r\n        rootText: \"Policy\",\r\n        textStyle: {\r\n          fill: \"#A8A8A8\"\r\n        },\r\n        position: \"bottom-left\"\r\n      }\r\n    },\r\n    pattern: {\r\n      type: \"line\"\r\n    },\r\n    state: {\r\n      active: {\r\n        style: {\r\n          stroke: \"#fff\",\r\n          lineWidth: 2\r\n        }\r\n      }\r\n    },\r\n    tooltip: {\r\n      position: \"bottom\",\r\n      customContent: (title, data) => {\r\n        if (!data) {\r\n          return;\r\n        }\r\n        console.log(data);\r\n        if (\r\n          !data[0]?.data?.data[\"policy\"] &&\r\n          !data[0]?.data?.data[\"category\"]\r\n        ) {\r\n          return (\r\n            <div style={{ ...tooltipStyle(data) }}>\r\n              <span>{data[0]?.name || \"\"}: </span>\r\n              <span style={{ fontWeight: \"700\", fontSize: \".95rem\" }}>\r\n                {valueOption == \"absoluteChange\" &&\r\n                  (data[0]?.name.includes(\"Expenditure\") ||\r\n                    data[0]?.data?.data[\"expenditure\"]) &&\r\n                  \"Â£\"}\r\n                {data[0]?.data?.data[valueOption] || \"\"}\r\n                {valueOption == \"percentageChange\" && \"%\"}\r\n              </span>\r\n            </div>\r\n          );\r\n        }\r\n\r\n        if (data[0]?.data?.data[\"policy\"]) {\r\n          return (\r\n            <div style={{ ...tooltipStyle(data) }}>Policy: {data[0].name}</div>\r\n          );\r\n        }\r\n\r\n        if (data[0]?.data?.data[\"category\"]) {\r\n          return (\r\n            <div style={{ ...tooltipStyle(data) }}>\r\n              Category: {data[0].name}\r\n            </div>\r\n          );\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      id=\"visualisation\"\r\n      style={{\r\n        backgroundColor: \"#df3b57\",\r\n        backgroundImage:\r\n          \"linear-gradient(135deg, #1c000a 0%, #2a0010 20%, #460001 50%, #54001f 80%, #70002a 100%)\",\r\n        minHeight: \"550px\",\r\n        height: \"100%\",\r\n        maxWidth: \"580px\",\r\n        borderRadius: \"20px\",\r\n        backgroundSize: \"cover\",\r\n        padding: \"1rem\",\r\n        position: \"relative\"\r\n      }}\r\n    >\r\n      <h1 style={plotTitle}>\r\n        Alcohol pricing policies are estimated to be{\" \"}\r\n        <span style={{ color: \"#FB989F\" }}>more effective</span> at reducing\r\n        consumption and harm{\" \"}\r\n        <span style={{ color: \"#FB989F\" }}>for men than women</span>\r\n      </h1>\r\n      <div style={{ height: \"420px\", marginBottom: \"20px\" }}>\r\n        <Sunburst {...chartConfig} />\r\n      </div>\r\n      <div\r\n        style={{\r\n          position: \"absolute\",\r\n          right: 0,\r\n          marginRight: \"1rem\",\r\n          bottom: \"12%\",\r\n          display: \"flex\",\r\n          flexDirection: \"column\"\r\n        }}\r\n      >\r\n        <OptionBtn\r\n          type=\"percentageChange\"\r\n          value={valueOption}\r\n          onClick={() => setValueOption(\"percentageChange\")}\r\n        >\r\n          % Change\r\n        </OptionBtn>\r\n        <OptionBtn\r\n          type=\"absoluteChange\"\r\n          value={valueOption}\r\n          onClick={() => setValueOption(\"absoluteChange\")}\r\n        >\r\n          Absolute Change\r\n        </OptionBtn>\r\n      </div>\r\n      <h1\r\n        style={{ fontWeight: 800, left: 0, fontSize: \".9rem\", ...sourceInfo }}\r\n      >\r\n        Dataviz.Shef\r\n      </h1>\r\n      <h1 style={{ right: 0, ...sourceInfo }}>\r\n        Source: The University of Sheffield - News\r\n      </h1>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Visualisation;\r\n"],"sourceRoot":""}