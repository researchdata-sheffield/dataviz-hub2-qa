{"version":3,"sources":["webpack://datavizhub-tuos/./src/pages/workshop/visualisation.jsx"],"names":["sourceInfo","position","bottom","margin","fontSize","color","lineHeight","whiteSpace","plotTitle","fontWeight","textAlign","OptionBtn","styled","props","value","type","transformValue","data","Math","log10","abs","forEach","child","useState","valueOption","setValueOption","tooltipStyle","padding","borderLeft","chartConfig","JSONdata","innerRadius","hierarchyConfig","field","ignoreParentValue","meta","interactions","drilldown","enabled","breadCrumb","rootText","textStyle","fill","pattern","state","active","style","stroke","lineWidth","tooltip","customContent","title","console","log","name","includes","id","backgroundColor","backgroundImage","minHeight","height","maxWidth","borderRadius","backgroundSize","marginBottom","right","marginRight","display","flexDirection","onClick","left"],"mappings":"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","file":"component---src-pages-workshop-visualisation-jsx-f8a3cae2c6990516d82c.js","sourcesContent":["import React, { useState } from \"react\";\nimport { Sunburst } from \"@ant-design/charts\";\nimport JSONdata from \"./data.json\";\nimport styled from \"styled-components\";\n\nconst sourceInfo = {\n  position: \"absolute\",\n  bottom: 0,\n  margin: \"1rem\",\n  fontSize: \"0.72rem\",\n  color: \"#BDBDBD\",\n  lineHeight: 1,\n  whiteSpace: \"nowrap\"\n};\n\nconst plotTitle = {\n  color: \"white\",\n  lineHeight: 1.1,\n  fontSize: \"1.6rem\",\n  fontWeight: 700,\n  textAlign: \"center\"\n};\n\nconst OptionBtn = styled.button`\n  color: #292929;\n  font-size: 0.77rem;\n  background: ${(props) => (props.value == props.type ? \"#fb989F\" : \"white\")};\n  padding: 0.3rem;\n  margin-top: 5px;\n  border-radius: 2px;\n  border: 1px solid\n    ${(props) => (props.value == props.type ? \"#fb989F\" : \"white\")};\n`;\n\nconst transformValue = (data) => {\n  if (data[\"absoluteChange\"]) {\n    data[\"absoluteChangeLog\"] =\n      Math.log10(Math.abs(data[\"absoluteChange\"])) || 0.1;\n  }\n\n  if (data[\"children\"]) {\n    data[\"children\"].forEach((child) => {\n      return transformValue(child);\n    });\n  }\n\n  return data;\n};\n\n/**\n * Visualisation component\n * @returns\n */\nconst Visualisation = () => {\n  const [valueOption, setValueOption] = useState(\"percentageChange\");\n\n  const tooltipStyle = (data) => {\n    return {\n      margin: \".5rem .2rem\",\n      padding: \".2rem .5rem\",\n      fontSize: \".88rem\",\n      lineHeight: \"1.2\",\n      borderLeft: `8px solid ${data[0]?.color}`\n    };\n  };\n\n  const chartConfig = {\n    data: transformValue(JSONdata),\n    innerRadius: 0.3,\n    hierarchyConfig: {\n      field: \"absoluteChangeLog\",\n      ignoreParentValue: true\n    },\n    meta: {\n      type: \"linear\"\n    },\n    interactions: [{ type: \"element-active\" }],\n    drilldown: {\n      enabled: true,\n      breadCrumb: {\n        rootText: \"Policy\",\n        textStyle: {\n          fill: \"#A8A8A8\"\n        },\n        position: \"bottom-left\"\n      }\n    },\n    pattern: {\n      type: \"line\"\n    },\n    state: {\n      active: {\n        style: {\n          stroke: \"#fff\",\n          lineWidth: 2\n        }\n      }\n    },\n    tooltip: {\n      position: \"bottom\",\n      customContent: (title, data) => {\n        if (!data) {\n          return;\n        }\n        console.log(data);\n        if (\n          !data[0]?.data?.data[\"policy\"] &&\n          !data[0]?.data?.data[\"category\"]\n        ) {\n          return (\n            <div style={{ ...tooltipStyle(data) }}>\n              <span>{data[0]?.name || \"\"}: </span>\n              <span style={{ fontWeight: \"700\", fontSize: \".95rem\" }}>\n                {valueOption == \"absoluteChange\" &&\n                  (data[0]?.name.includes(\"Expenditure\") ||\n                    data[0]?.data?.data[\"expenditure\"]) &&\n                  \"Â£\"}\n                {data[0]?.data?.data[valueOption] || \"\"}\n                {valueOption == \"percentageChange\" && \"%\"}\n              </span>\n            </div>\n          );\n        }\n\n        if (data[0]?.data?.data[\"policy\"]) {\n          return (\n            <div style={{ ...tooltipStyle(data) }}>Policy: {data[0].name}</div>\n          );\n        }\n\n        if (data[0]?.data?.data[\"category\"]) {\n          return (\n            <div style={{ ...tooltipStyle(data) }}>\n              Category: {data[0].name}\n            </div>\n          );\n        }\n      }\n    }\n  };\n\n  return (\n    <div\n      id=\"visualisation\"\n      style={{\n        backgroundColor: \"#df3b57\",\n        backgroundImage:\n          \"linear-gradient(135deg, #1c000a 0%, #2a0010 20%, #460001 50%, #54001f 80%, #70002a 100%)\",\n        minHeight: \"550px\",\n        height: \"100%\",\n        maxWidth: \"580px\",\n        borderRadius: \"20px\",\n        backgroundSize: \"cover\",\n        padding: \"1rem\",\n        position: \"relative\"\n      }}\n    >\n      <h1 style={plotTitle}>\n        Alcohol pricing policies are estimated to be{\" \"}\n        <span style={{ color: \"#FB989F\" }}>more effective</span> at reducing\n        consumption and harm{\" \"}\n        <span style={{ color: \"#FB989F\" }}>for men than women</span>\n      </h1>\n      <div style={{ height: \"420px\", marginBottom: \"20px\" }}>\n        <Sunburst {...chartConfig} />\n      </div>\n      <div\n        style={{\n          position: \"absolute\",\n          right: 0,\n          marginRight: \"1rem\",\n          bottom: \"12%\",\n          display: \"flex\",\n          flexDirection: \"column\"\n        }}\n      >\n        <OptionBtn\n          type=\"percentageChange\"\n          value={valueOption}\n          onClick={() => setValueOption(\"percentageChange\")}\n        >\n          % Change\n        </OptionBtn>\n        <OptionBtn\n          type=\"absoluteChange\"\n          value={valueOption}\n          onClick={() => setValueOption(\"absoluteChange\")}\n        >\n          Absolute Change\n        </OptionBtn>\n      </div>\n      <h1\n        style={{ fontWeight: 800, left: 0, fontSize: \".9rem\", ...sourceInfo }}\n      >\n        Dataviz.Shef\n      </h1>\n      <h1 style={{ right: 0, ...sourceInfo }}>\n        Source: The University of Sheffield - News\n      </h1>\n    </div>\n  );\n};\n\nexport default Visualisation;\n"],"sourceRoot":""}