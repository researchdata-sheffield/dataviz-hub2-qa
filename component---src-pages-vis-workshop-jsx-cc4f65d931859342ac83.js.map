{"version":3,"sources":["webpack://datavizhub-tuos/./src/pages/visWorkshop.jsx","webpack://datavizhub-tuos/./src/pages/workshop/visualisation.jsx"],"names":["useState","process","authenticated","setAuth","authentication","window","prompt","useEffect","title","keywords","className","sourceInfo","position","bottom","margin","fontSize","color","lineHeight","whiteSpace","plotTitle","fontWeight","textAlign","OptionBtn","styled","props","value","type","transformValue","data","Math","log10","abs","forEach","child","valueOption","setValueOption","tooltipStyle","padding","borderLeft","chartConfig","JSONdata","innerRadius","hierarchyConfig","field","ignoreParentValue","meta","interactions","drilldown","enabled","breadCrumb","rootText","textStyle","fill","pattern","state","active","style","stroke","lineWidth","tooltip","customContent","console","log","name","includes","id","backgroundColor","backgroundImage","minHeight","height","maxWidth","borderRadius","backgroundSize","marginBottom","right","marginRight","display","flexDirection","onClick","left"],"mappings":"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","file":"component---src-pages-vis-workshop-jsx-cc4f65d931859342ac83.js","sourcesContent":["/* eslint-disable no-undef */\r\nimport React, { useState, useEffect } from \"react\";\r\nimport SEO from \"../components/shared/seo\";\r\nimport Visualisation from \"./workshop/visualisation\";\r\n\r\nconst VisWorkshop = () => {\r\n  const [authenticated, setAuth] = useState(\r\n    process.env.NODE_ENV === \"development\" ?? false\r\n  );\r\n\r\n  useEffect(() => {\r\n    authentication();\r\n  }, [authenticated]);\r\n\r\n  function authentication() {\r\n    if (typeof window == \"undefined\") {\r\n      return;\r\n    }\r\n\r\n    if (!authenticated) {\r\n      let userInput = window.prompt(\r\n        \"This route is password protected, please enter the password.\"\r\n      );\r\n\r\n      if (userInput == process.env.GATSBY_ENV) {\r\n        setAuth(true);\r\n      } else {\r\n        authentication();\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    authenticated && (\r\n      <>\r\n        <SEO\r\n          title=\"Craft visualisations\"\r\n          keywords={[\r\n            \"the university of sheffield\",\r\n            \"data visualisation\",\r\n            \"data visualisation hub\",\r\n            \"research\",\r\n            \"about dataviz\"\r\n          ]}\r\n        />\r\n        <div className=\"min-h-100 flex flex-wrap justify-center py-32\">\r\n          <Visualisation />\r\n        </div>\r\n      </>\r\n    )\r\n  );\r\n};\r\n\r\nexport default VisWorkshop;\r\n","import React, { useState } from \"react\";\r\nimport { Sunburst } from \"@ant-design/charts\";\r\nimport JSONdata from \"./data.json\";\r\nimport styled from \"styled-components\";\r\n\r\nconst sourceInfo = {\r\n  position: \"absolute\",\r\n  bottom: 0,\r\n  margin: \"1rem\",\r\n  fontSize: \"0.72rem\",\r\n  color: \"#BDBDBD\",\r\n  lineHeight: 1,\r\n  whiteSpace: \"nowrap\"\r\n};\r\n\r\nconst plotTitle = {\r\n  color: \"white\",\r\n  lineHeight: 1.1,\r\n  fontSize: \"1.6rem\",\r\n  fontWeight: 700,\r\n  textAlign: \"center\"\r\n};\r\n\r\nconst OptionBtn = styled.button`\r\n  color: #292929;\r\n  font-size: 0.77rem;\r\n  background: ${(props) => (props.value == props.type ? \"#fb989F\" : \"white\")};\r\n  padding: 0.3rem;\r\n  margin-top: 5px;\r\n  border-radius: 2px;\r\n  border: 1px solid\r\n    ${(props) => (props.value == props.type ? \"#fb989F\" : \"white\")};\r\n`;\r\n\r\nconst transformValue = (data) => {\r\n  if (data[\"absoluteChange\"]) {\r\n    data[\"absoluteChangeLog\"] =\r\n      Math.log10(Math.abs(data[\"absoluteChange\"])) || 0.1;\r\n  }\r\n\r\n  if (data[\"children\"]) {\r\n    data[\"children\"].forEach((child) => {\r\n      return transformValue(child);\r\n    });\r\n  }\r\n\r\n  return data;\r\n};\r\n\r\n/**\r\n * Visualisation component\r\n * @returns\r\n */\r\nconst Visualisation = () => {\r\n  const [valueOption, setValueOption] = useState(\"percentageChange\");\r\n\r\n  const tooltipStyle = (data) => {\r\n    return {\r\n      margin: \".5rem .2rem\",\r\n      padding: \".2rem .5rem\",\r\n      fontSize: \".88rem\",\r\n      lineHeight: \"1.2\",\r\n      borderLeft: `8px solid ${data[0]?.color}`\r\n    };\r\n  };\r\n\r\n  const chartConfig = {\r\n    data: transformValue(JSONdata),\r\n    innerRadius: 0.3,\r\n    hierarchyConfig: {\r\n      field: \"absoluteChangeLog\",\r\n      ignoreParentValue: true\r\n    },\r\n    meta: {\r\n      type: \"linear\"\r\n    },\r\n    interactions: [{ type: \"element-active\" }],\r\n    drilldown: {\r\n      enabled: true,\r\n      breadCrumb: {\r\n        rootText: \"Policy\",\r\n        textStyle: {\r\n          fill: \"#A8A8A8\"\r\n        },\r\n        position: \"bottom-left\"\r\n      }\r\n    },\r\n    pattern: {\r\n      type: \"line\"\r\n    },\r\n    state: {\r\n      active: {\r\n        style: {\r\n          stroke: \"#fff\",\r\n          lineWidth: 2\r\n        }\r\n      }\r\n    },\r\n    tooltip: {\r\n      position: \"bottom\",\r\n      customContent: (title, data) => {\r\n        if (!data) {\r\n          return;\r\n        }\r\n        console.log(data);\r\n        if (\r\n          !data[0]?.data?.data[\"policy\"] &&\r\n          !data[0]?.data?.data[\"category\"]\r\n        ) {\r\n          return (\r\n            <div style={{ ...tooltipStyle(data) }}>\r\n              <span>{data[0]?.name || \"\"}: </span>\r\n              <span style={{ fontWeight: \"700\", fontSize: \".95rem\" }}>\r\n                {valueOption == \"absoluteChange\" &&\r\n                  (data[0]?.name.includes(\"Expenditure\") ||\r\n                    data[0]?.data?.data[\"expenditure\"]) &&\r\n                  \"Â£\"}\r\n                {data[0]?.data?.data[valueOption] || \"\"}\r\n                {valueOption == \"percentageChange\" && \"%\"}\r\n              </span>\r\n            </div>\r\n          );\r\n        }\r\n\r\n        if (data[0]?.data?.data[\"policy\"]) {\r\n          return (\r\n            <div style={{ ...tooltipStyle(data) }}>Policy: {data[0].name}</div>\r\n          );\r\n        }\r\n\r\n        if (data[0]?.data?.data[\"category\"]) {\r\n          return (\r\n            <div style={{ ...tooltipStyle(data) }}>\r\n              Category: {data[0].name}\r\n            </div>\r\n          );\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      id=\"visualisation\"\r\n      style={{\r\n        backgroundColor: \"#df3b57\",\r\n        backgroundImage:\r\n          \"linear-gradient(135deg, #1c000a 0%, #2a0010 20%, #460001 50%, #54001f 80%, #70002a 100%)\",\r\n        minHeight: \"550px\",\r\n        height: \"100%\",\r\n        maxWidth: \"580px\",\r\n        borderRadius: \"20px\",\r\n        backgroundSize: \"cover\",\r\n        padding: \"1rem\",\r\n        position: \"relative\"\r\n      }}\r\n    >\r\n      <h1 style={plotTitle}>\r\n        Alcohol pricing policies are estimated to be{\" \"}\r\n        <span style={{ color: \"#FB989F\" }}>more effective</span> at reducing\r\n        consumption and harm{\" \"}\r\n        <span style={{ color: \"#FB989F\" }}>for men than women</span>\r\n      </h1>\r\n      <div style={{ height: \"420px\", marginBottom: \"20px\" }}>\r\n        <Sunburst {...chartConfig} />\r\n      </div>\r\n      <div\r\n        style={{\r\n          position: \"absolute\",\r\n          right: 0,\r\n          marginRight: \"1rem\",\r\n          bottom: \"12%\",\r\n          display: \"flex\",\r\n          flexDirection: \"column\"\r\n        }}\r\n      >\r\n        <OptionBtn\r\n          type=\"percentageChange\"\r\n          value={valueOption}\r\n          onClick={() => setValueOption(\"percentageChange\")}\r\n        >\r\n          % Change\r\n        </OptionBtn>\r\n        <OptionBtn\r\n          type=\"absoluteChange\"\r\n          value={valueOption}\r\n          onClick={() => setValueOption(\"absoluteChange\")}\r\n        >\r\n          Absolute Change\r\n        </OptionBtn>\r\n      </div>\r\n      <h1\r\n        style={{ fontWeight: 800, left: 0, fontSize: \".9rem\", ...sourceInfo }}\r\n      >\r\n        Dataviz.Shef\r\n      </h1>\r\n      <h1 style={{ right: 0, ...sourceInfo }}>\r\n        Source: The University of Sheffield - News\r\n      </h1>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Visualisation;\r\n"],"sourceRoot":""}