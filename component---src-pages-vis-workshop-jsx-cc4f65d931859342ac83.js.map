{"version":3,"sources":["webpack://datavizhub-tuos/./src/pages/visWorkshop.jsx","webpack://datavizhub-tuos/./src/pages/workshop/visualisation.jsx"],"names":["useState","process","authenticated","setAuth","authentication","window","prompt","useEffect","title","keywords","className","sourceInfo","position","bottom","margin","fontSize","color","lineHeight","whiteSpace","plotTitle","fontWeight","textAlign","OptionBtn","styled","props","value","type","transformValue","data","Math","log10","abs","forEach","child","valueOption","setValueOption","tooltipStyle","padding","borderLeft","chartConfig","JSONdata","innerRadius","hierarchyConfig","field","ignoreParentValue","meta","interactions","drilldown","enabled","breadCrumb","rootText","textStyle","fill","pattern","state","active","style","stroke","lineWidth","tooltip","customContent","console","log","name","includes","id","backgroundColor","backgroundImage","minHeight","height","maxWidth","borderRadius","backgroundSize","marginBottom","right","marginRight","display","flexDirection","onClick","left"],"mappings":"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","file":"component---src-pages-vis-workshop-jsx-cc4f65d931859342ac83.js","sourcesContent":["/* eslint-disable no-undef */\nimport React, { useState, useEffect } from \"react\";\nimport SEO from \"../components/shared/seo\";\nimport Visualisation from \"./workshop/visualisation\";\n\nconst VisWorkshop = () => {\n  const [authenticated, setAuth] = useState(\n    process.env.NODE_ENV === \"development\" ?? false\n  );\n\n  useEffect(() => {\n    authentication();\n  }, [authenticated]);\n\n  function authentication() {\n    if (typeof window == \"undefined\") {\n      return;\n    }\n\n    if (!authenticated) {\n      let userInput = window.prompt(\n        \"This route is password protected, please enter the password.\"\n      );\n\n      if (userInput == process.env.GATSBY_ENV) {\n        setAuth(true);\n      } else {\n        authentication();\n      }\n    }\n  }\n\n  return (\n    authenticated && (\n      <>\n        <SEO\n          title=\"Craft visualisations\"\n          keywords={[\n            \"the university of sheffield\",\n            \"data visualisation\",\n            \"data visualisation hub\",\n            \"research\",\n            \"about dataviz\"\n          ]}\n        />\n        <div className=\"min-h-100 flex flex-wrap justify-center py-32\">\n          <Visualisation />\n        </div>\n      </>\n    )\n  );\n};\n\nexport default VisWorkshop;\n","import React, { useState } from \"react\";\nimport { Sunburst } from \"@ant-design/charts\";\nimport JSONdata from \"./data.json\";\nimport styled from \"styled-components\";\n\nconst sourceInfo = {\n  position: \"absolute\",\n  bottom: 0,\n  margin: \"1rem\",\n  fontSize: \"0.72rem\",\n  color: \"#BDBDBD\",\n  lineHeight: 1,\n  whiteSpace: \"nowrap\"\n};\n\nconst plotTitle = {\n  color: \"white\",\n  lineHeight: 1.1,\n  fontSize: \"1.6rem\",\n  fontWeight: 700,\n  textAlign: \"center\"\n};\n\nconst OptionBtn = styled.button`\n  color: #292929;\n  font-size: 0.77rem;\n  background: ${(props) => (props.value == props.type ? \"#fb989F\" : \"white\")};\n  padding: 0.3rem;\n  margin-top: 5px;\n  border-radius: 2px;\n  border: 1px solid\n    ${(props) => (props.value == props.type ? \"#fb989F\" : \"white\")};\n`;\n\nconst transformValue = (data) => {\n  if (data[\"absoluteChange\"]) {\n    data[\"absoluteChangeLog\"] =\n      Math.log10(Math.abs(data[\"absoluteChange\"])) || 0.1;\n  }\n\n  if (data[\"children\"]) {\n    data[\"children\"].forEach((child) => {\n      return transformValue(child);\n    });\n  }\n\n  return data;\n};\n\n/**\n * Visualisation component\n * @returns\n */\nconst Visualisation = () => {\n  const [valueOption, setValueOption] = useState(\"percentageChange\");\n\n  const tooltipStyle = (data) => {\n    return {\n      margin: \".5rem .2rem\",\n      padding: \".2rem .5rem\",\n      fontSize: \".88rem\",\n      lineHeight: \"1.2\",\n      borderLeft: `8px solid ${data[0]?.color}`\n    };\n  };\n\n  const chartConfig = {\n    data: transformValue(JSONdata),\n    innerRadius: 0.3,\n    hierarchyConfig: {\n      field: \"absoluteChangeLog\",\n      ignoreParentValue: true\n    },\n    meta: {\n      type: \"linear\"\n    },\n    interactions: [{ type: \"element-active\" }],\n    drilldown: {\n      enabled: true,\n      breadCrumb: {\n        rootText: \"Policy\",\n        textStyle: {\n          fill: \"#A8A8A8\"\n        },\n        position: \"bottom-left\"\n      }\n    },\n    pattern: {\n      type: \"line\"\n    },\n    state: {\n      active: {\n        style: {\n          stroke: \"#fff\",\n          lineWidth: 2\n        }\n      }\n    },\n    tooltip: {\n      position: \"bottom\",\n      customContent: (title, data) => {\n        if (!data) {\n          return;\n        }\n        console.log(data);\n        if (\n          !data[0]?.data?.data[\"policy\"] &&\n          !data[0]?.data?.data[\"category\"]\n        ) {\n          return (\n            <div style={{ ...tooltipStyle(data) }}>\n              <span>{data[0]?.name || \"\"}: </span>\n              <span style={{ fontWeight: \"700\", fontSize: \".95rem\" }}>\n                {valueOption == \"absoluteChange\" &&\n                  (data[0]?.name.includes(\"Expenditure\") ||\n                    data[0]?.data?.data[\"expenditure\"]) &&\n                  \"Â£\"}\n                {data[0]?.data?.data[valueOption] || \"\"}\n                {valueOption == \"percentageChange\" && \"%\"}\n              </span>\n            </div>\n          );\n        }\n\n        if (data[0]?.data?.data[\"policy\"]) {\n          return (\n            <div style={{ ...tooltipStyle(data) }}>Policy: {data[0].name}</div>\n          );\n        }\n\n        if (data[0]?.data?.data[\"category\"]) {\n          return (\n            <div style={{ ...tooltipStyle(data) }}>\n              Category: {data[0].name}\n            </div>\n          );\n        }\n      }\n    }\n  };\n\n  return (\n    <div\n      id=\"visualisation\"\n      style={{\n        backgroundColor: \"#df3b57\",\n        backgroundImage:\n          \"linear-gradient(135deg, #1c000a 0%, #2a0010 20%, #460001 50%, #54001f 80%, #70002a 100%)\",\n        minHeight: \"550px\",\n        height: \"100%\",\n        maxWidth: \"580px\",\n        borderRadius: \"20px\",\n        backgroundSize: \"cover\",\n        padding: \"1rem\",\n        position: \"relative\"\n      }}\n    >\n      <h1 style={plotTitle}>\n        Alcohol pricing policies are estimated to be{\" \"}\n        <span style={{ color: \"#FB989F\" }}>more effective</span> at reducing\n        consumption and harm{\" \"}\n        <span style={{ color: \"#FB989F\" }}>for men than women</span>\n      </h1>\n      <div style={{ height: \"420px\", marginBottom: \"20px\" }}>\n        <Sunburst {...chartConfig} />\n      </div>\n      <div\n        style={{\n          position: \"absolute\",\n          right: 0,\n          marginRight: \"1rem\",\n          bottom: \"12%\",\n          display: \"flex\",\n          flexDirection: \"column\"\n        }}\n      >\n        <OptionBtn\n          type=\"percentageChange\"\n          value={valueOption}\n          onClick={() => setValueOption(\"percentageChange\")}\n        >\n          % Change\n        </OptionBtn>\n        <OptionBtn\n          type=\"absoluteChange\"\n          value={valueOption}\n          onClick={() => setValueOption(\"absoluteChange\")}\n        >\n          Absolute Change\n        </OptionBtn>\n      </div>\n      <h1\n        style={{ fontWeight: 800, left: 0, fontSize: \".9rem\", ...sourceInfo }}\n      >\n        Dataviz.Shef\n      </h1>\n      <h1 style={{ right: 0, ...sourceInfo }}>\n        Source: The University of Sheffield - News\n      </h1>\n    </div>\n  );\n};\n\nexport default Visualisation;\n"],"sourceRoot":""}